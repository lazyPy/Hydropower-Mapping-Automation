<!-- Progress Bar Component -->
<div class="card border-0 shadow-sm mb-3" id="progressCard-{{ id|default:'default' }}">
    <div class="card-body">
        <div class="d-flex align-items-center mb-2">
            <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                <span class="visually-hidden">Processing...</span>
            </div>
            <strong>{{ title|default:"Processing" }}</strong>
            <span class="ms-auto text-muted small" id="progressPercent-{{ id|default:'default' }}">0%</span>
        </div>
        <div class="progress" style="height: 8px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" 
                 role="progressbar" 
                 id="progressBar-{{ id|default:'default' }}"
                 style="width: 0%" 
                 aria-valuenow="0" 
                 aria-valuemin="0" 
                 aria-valuemax="100"></div>
        </div>
        {% if steps %}
            <div class="mt-3">
                <ul class="list-unstyled mb-0 small text-muted">
                    {% for step in steps %}
                        <li class="mb-1">
                            <i class="bi bi-arrow-right-short"></i> {{ step }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>
</div>

<script>
// Progress Bar Update Function
function updateProgress(id, percent, message) {
    const progressBar = document.getElementById('progressBar-' + (id || 'default'));
    const progressPercent = document.getElementById('progressPercent-' + (id || 'default'));
    
    if (progressBar) {
        progressBar.style.width = percent + '%';
        progressBar.setAttribute('aria-valuenow', percent);
    }
    
    if (progressPercent) {
        progressPercent.textContent = percent + '%';
    }
    
    if (percent >= 100) {
        setTimeout(() => {
            const card = document.getElementById('progressCard-' + (id || 'default'));
            if (card) {
                card.classList.add('d-none');
            }
        }, 1000);
    }
}
</script>
